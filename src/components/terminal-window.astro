---
interface Props {
  title?: string;
  icon?: 'terminal' | 'file';
  class?: string;
}

const { title = 'terminal', icon = 'terminal', class: className } = Astro.props;
---

<div class:list={['terminal-container group', className]}>
  <!-- Outer glow effect -->
  <div class="terminal-glow"></div>

  <!-- Terminal window -->
  <div class="terminal-window">
    <!-- Title bar -->
    <div class="terminal-titlebar">
      <div class="terminal-buttons">
        <span class="terminal-btn terminal-btn-close"></span>
        <span class="terminal-btn terminal-btn-minimize"></span>
        <span class="terminal-btn terminal-btn-maximize"></span>
      </div>
      <div class="terminal-title">
        {icon === 'terminal' && (
          <svg class="terminal-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="4 17 10 11 4 5"></polyline>
            <line x1="12" y1="19" x2="20" y2="19"></line>
          </svg>
        )}
        {icon === 'file' && (
          <svg class="terminal-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" />
            <polyline points="14 2 14 8 20 8" />
          </svg>
        )}
        <span>{title}</span>
      </div>
      <div class="terminal-buttons-spacer"></div>
    </div>

    <!-- Terminal content area -->
    <div class="terminal-content">
      <slot />
    </div>
  </div>
</div>

<style>
  .terminal-container {
    position: relative;
    width: 100%;
  }

  /* Subtle ambient glow */
  .terminal-glow {
    position: absolute;
    inset: -2px;
    background: linear-gradient(
      135deg,
      rgba(34, 197, 94, 0.15) 0%,
      rgba(16, 185, 129, 0.1) 50%,
      rgba(6, 182, 212, 0.15) 100%
    );
    border-radius: 14px;
    filter: blur(20px);
    opacity: 0;
    transition: opacity 0.5s ease;
    z-index: -1;
  }

  .terminal-container:hover .terminal-glow {
    opacity: 1;
  }

  .terminal-window {
    position: relative;
    border-radius: 12px;
    overflow: hidden;
    background: #0d0d0d;
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.05),
      0 25px 50px -12px rgba(0, 0, 0, 0.6),
      0 12px 24px -8px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.03);
  }

  /* Title bar */
  .terminal-titlebar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 38px;
    padding: 0 14px;
    background: linear-gradient(180deg, #2a2a2a 0%, #1f1f1f 100%);
    border-bottom: 1px solid rgba(0, 0, 0, 0.5);
    user-select: none;
  }

  .terminal-buttons {
    display: flex;
    gap: 8px;
    width: 54px;
  }

  .terminal-buttons-spacer {
    width: 54px;
  }

  .terminal-btn {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    position: relative;
  }

  .terminal-btn::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 50%;
    opacity: 0;
    transition: opacity 0.15s ease;
  }

  .terminal-btn-close {
    background: linear-gradient(180deg, #ff6058 0%, #e5453e 100%);
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.25),
      0 1px 2px rgba(0, 0, 0, 0.2);
  }

  .terminal-btn-close::after {
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12'%3E%3Cpath d='M3.5 3.5l5 5M8.5 3.5l-5 5' stroke='%23820c08' stroke-width='1.2'/%3E%3C/svg%3E") center/8px no-repeat;
  }

  .terminal-btn-minimize {
    background: linear-gradient(180deg, #ffbd2e 0%, #dea123 100%);
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.25),
      0 1px 2px rgba(0, 0, 0, 0.2);
  }

  .terminal-btn-minimize::after {
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12'%3E%3Cpath d='M2.5 6h7' stroke='%23995d00' stroke-width='1.2'/%3E%3C/svg%3E") center/8px no-repeat;
  }

  .terminal-btn-maximize {
    background: linear-gradient(180deg, #28c940 0%, #1aab2f 100%);
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.25),
      0 1px 2px rgba(0, 0, 0, 0.2);
  }

  .terminal-btn-maximize::after {
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12'%3E%3Cpath d='M3 3h6v6H3z' stroke='%23096e19' stroke-width='1.2' fill='none'/%3E%3C/svg%3E") center/8px no-repeat;
  }

  .terminal-container:hover .terminal-btn::after {
    opacity: 1;
  }

  .terminal-title {
    display: flex;
    align-items: center;
    gap: 6px;
    color: rgba(255, 255, 255, 0.5);
    font-family: 'SF Mono', 'Menlo', 'Monaco', 'Consolas', monospace;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.01em;
  }

  .terminal-icon {
    width: 14px;
    height: 14px;
    opacity: 0.6;
  }

  /* Terminal content */
  .terminal-content {
    position: relative;
    background: #0d0d0d;
  }

  /* Dark mode adjustments */
  :global(.dark) .terminal-glow {
    background: linear-gradient(
      135deg,
      rgba(34, 197, 94, 0.2) 0%,
      rgba(16, 185, 129, 0.15) 50%,
      rgba(6, 182, 212, 0.2) 100%
    );
  }

  :global(.dark) .terminal-window {
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.08),
      0 25px 50px -12px rgba(0, 0, 0, 0.8),
      0 12px 24px -8px rgba(0, 0, 0, 0.6),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }
</style>
