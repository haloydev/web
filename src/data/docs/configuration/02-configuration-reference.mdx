---
title: 'Configuration Reference'
slug: 'configuration-reference'
category: configuration

---

import Code from '@/components/code.astro'

Complete reference for all Haloy configuration options.

## Root Configuration Options

| Key | Type | Required | Description |
|-----|------|----------|-------------|
| `name` | string | **Yes** | Unique application name |
| `image` | object | No | Docker image configuration (see [Image Configuration](/docs/gimage-configuration)) |
| `server` | string | No | Haloy server API URL |
| `api_token` | object | No | API token configuration (see [Authentication](/guides/authentication)) |
| `deployment_strategy` | string | No | Deployment strategy: "rolling" (default) or "replace" |
| `domains` | array | No | Domain configuration |
| `acme_email` | string | No | Let's Encrypt email (required with domains) |
| `replicas` | integer | No | Number of container instances (default: 1) |
| `port` | string/integer | No | Container port to expose (default: "8080"). The port your application listens on inside the container. |
| `health_check_path` | string | No | Health check endpoint (default: "/") |
| `env` | array | No | Environment variables (see [Environment Variables](/docs/genvironment-variables)) |
| `volumes` | array | No | Volume mounts (see [Volumes](/docs/gvolumes)) |
| `pre_deploy` | array | No | Commands to run before deploy |
| `post_deploy` | array | No | Commands to run after deploy |
| `global_pre_deploy` | array | No | Commands to run once before all deployments (multi-target only) |
| `global_post_deploy` | array | No | Commands to run once after all deployments (multi-target only) |
| `targets` | object | No | Multiple deployment targets with overrides (see [Multi-Server Deployments](/deployment/multi-server-deployments)) |
| `secret_providers` | object | No | Secret provider configuration (see [Secret Providers](/docs/gsecret-providers)) |
| `network` | string | No | Docker network for the container. Defaults to `haloy-public` |

## Deployment Strategies

### Rolling Deployment (Default)

Gradually replaces old containers with new ones, ensuring zero downtime:

<Code code={`name: "my-app"
deployment_strategy: "rolling"
replicas: 3`} lang="yaml" />

### Replace Deployment

Stops all old containers before starting new ones:

<Code code={`name: "my-app"
deployment_strategy: "replace"
replicas: 3`} lang="yaml" />

## Deployment Hooks

Run custom commands before or after deployment:

<Code code={`name: "my-app"
pre_deploy:
  - "npm run migrate"
  - "echo 'Starting deployment'"

post_deploy:
  - "curl -X POST https://status.example.com/notify"
  - "echo 'Deployment complete'"`} lang="yaml" />

For multi-target deployments, use global hooks:

<Code code={`name: "my-app"
global_pre_deploy:
  - "npm run build"
  - "docker build -t my-app ."

global_post_deploy:
  - "echo 'All deployments complete'"

targets:
  production:
    server: prod.haloy.com
    pre_deploy:
      - "npm run migrate:production"

  staging:
    server: staging.haloy.com
    pre_deploy:
      - "npm run migrate:staging"`} lang="yaml" />

## Target Configuration

When using multi-target deployments, each target can override base configuration:

| Key | Type | Description |
|-----|------|-------------|
| `server` | string | Override the server for this target |
| `api_token` | object | Override the API token configuration |
| `image` | object | Override image configuration (repository, tag, etc.) |
| `domains` | array | Override domain configuration |
| `acme_email` | string | Override ACME email |
| `env` | array | Override environment variables |
| `replicas` | integer | Override number of replicas |
| `port` | string | Override container port |
| `health_check_path` | string | Override health check path |
| `volumes` | array | Override volume mounts |
| `pre_deploy` | array | Override pre-deploy hooks |
| `post_deploy` | array | Override post-deploy hooks |
| `network` | string | Override docker network |

**Inheritance Rules:**
- Base configuration provides defaults for all targets
- Target-specific values completely override base values (no merging)
- Only specified fields in targets override the base
- `global_pre_deploy` and `global_post_deploy` run once regardless of targets

### Example

<Code code={`name: "my-app"
# Base configuration - inherited by all targets
image:
  repository: "ghcr.io/my-org/my-app"
  tag: "latest"
replicas: 2
port: "8080"
env:
  - name: "LOG_LEVEL"
    value: "info"

targets:
  production:
    # Inherits: replicas=2, port="8080"
    # Overrides: image.tag, adds domains, overrides env completely
    server: "prod.haloy.com"
    image:
      tag: "v1.2.3"
    domains:
      - domain: "my-app.com"
    env:  # Completely replaces base env
      - name: "NODE_ENV"
        value: "production"

  staging:
    # Inherits: image (repository + tag), replicas=2, port="8080", env
    # Overrides: server, adds domains, changes replicas
    server: "staging.haloy.com"
    replicas: 1
    domains:
      - domain: "staging.my-app.com"`} lang="yaml" />

## Custom Docker Network

By default, containers are attached to the `haloy-public` network. You can override this:

<Code code={`name: "my-app"
network: "my-custom-network"`} lang="yaml" />

## Validation

Validate your configuration file:

<Code code={`haloy validate-config
haloy validate-config --config path/to/config.yaml
haloy validate-config --show-resolved-config  # Display with secrets (use with caution)`} lang="bash" />

## Next Steps

- [Environment Variables](/docs/environment-variables)
- [Volume Configuration](/docs/volumes)
- [Image Configuration](/docs/image-configuration)
- [Secret Providers](/docs/secret-providers)
