---
title: 'Uninstalling'
slug: 'uninstalling'
section: guides
---

import Code from '@/components/code.astro';

Instructions for removing Haloy components from your system.

## Client Uninstallation

Remove the Haloy CLI from your local machine.

### Remove Client Only

<Code code={`curl -sL https://sh.haloy.dev/uninstall-haloy.sh | bash`} lang="bash" />

This removes:

- The `haloy` CLI tool from `~/.local/bin/`
- Shell completion scripts (if installed)

This does NOT remove:

- Client configuration (`~/.config/haloy/`)
- Server configurations and tokens

### Remove Client Configuration

To also remove configuration files:

<Code code={`# Remove client configuration
rm -rf ~/.config/haloy/

# Remove client data

rm -rf ~/.local/share/haloy/`} lang="bash" />

## Server Uninstallation

Remove Haloy components from your server.

### Remove Admin Tool Only

Remove `haloyadm` but keep `haloyd` and deployed applications running:

<Code code={`curl -sL https://sh.haloy.dev/uninstall-haloyadm.sh | sudo bash`} lang="bash" />

This removes:

- The `haloyadm` CLI tool from `/usr/local/bin/`

This does NOT remove:

- `haloyd` daemon
- HAProxy
- Application containers
- Configuration or data

> **Note**: You can reinstall `haloyadm` later if needed to manage the daemon.

### Complete Server Removal

Remove all Haloy components, data, and configurations:

<Code code={`curl -sL https://sh.haloy.dev/uninstall-server.sh | sudo bash`} lang="bash" />

This removes:

- `haloyd` daemon
- HAProxy container
- All Haloy configuration files
- All Haloy data (databases, certificates, configs)
- systemd service files
- Docker network

This does NOT remove:

- Your application containers (must be stopped/removed separately)
- Docker volumes created by your applications
- `haloyadm` CLI tool

### Stop Applications Before Removal

Before complete server removal, stop your applications:

<Code code={`# From your local machine
haloy stop --all --remove-containers

# Or on the server

docker ps --filter "label=haloy.app" -q | xargs docker stop
docker ps --filter "label=haloy.app" -qa | xargs docker rm`} lang="bash" />

## Complete Cleanup

For a full cleanup of everything Haloy-related:

### On Local Machine

<Code code={`# 1. Remove CLI
curl -sL https://sh.haloy.dev/uninstall-haloy.sh | bash

# 2. Remove configuration

rm -rf ~/.config/haloy/
rm -rf ~/.local/share/haloy/

# 3. Remove shell completion (if installed)

# Bash (Linux)

sudo rm -f /etc/bash_completion.d/haloy

# Bash (macOS)

sudo rm -f /usr/local/etc/bash_completion.d/haloy

# Zsh

rm -f ~/.local/share/zsh/site-functions/\_haloy

# Fish

rm -f ~/.config/fish/completions/haloy.fish`} lang="bash" />

### On Server

<Code code={`# 1. Stop all applications
docker ps --filter "label=haloy.app" -q | xargs docker stop
docker ps --filter "label=haloy.app" -qa | xargs docker rm

# 2. Remove server components

curl -sL https://sh.haloy.dev/uninstall-server.sh | sudo bash

# 3. Remove admin tool

curl -sL https://sh.haloy.dev/uninstall-haloyadm.sh | sudo bash

# 4. Optional: Remove application data volumes

docker volume ls --filter "label=haloy.app" -q | xargs docker volume rm

# 5. Optional: Clean up unused Docker resources

docker system prune -a --volumes`} lang="bash" />

## Selective Removal

### Keep Data, Remove Services

Stop services but preserve data for later reinstallation:

<Code code={`# Stop services
sudo haloyadm stop

# Remove only the admin tool and systemd services

curl -sL https://sh.haloy.dev/uninstall-haloyadm.sh | sudo bash

# Data remains in /var/lib/haloy/ and /etc/haloy/

# Can be restored by reinstalling and running:

# sudo haloyadm init`} lang="bash" />

### Remove Everything Except Applications

Remove Haloy but keep applications running:

<Code code={`# Applications will continue running but:
# - No more deployments possible
# - No SSL/TLS (HAProxy removed)
# - No domain routing
# - Direct access to container ports needed

# Stop Haloy services

sudo haloyadm stop

# Remove Haloy components

curl -sL https://sh.haloy.dev/uninstall-server.sh | sudo bash

# Applications still running

docker ps --filter "label=haloy.app"`} lang="bash" />

> **Warning**: Applications will lose HAProxy routing and SSL. You'll need alternative routing.

## What Gets Removed

### Client Uninstallation

| Item             | Location                             | Removed        |
| ---------------- | ------------------------------------ | -------------- |
| `haloy` CLI      | `~/.local/bin/haloy`                 | ✅ Yes         |
| Shell completion | `/etc/bash_completion.d/` or similar | ✅ Yes         |
| Client config    | `~/.config/haloy/`                   | ❌ No (manual) |
| Client data      | `~/.local/share/haloy/`              | ❌ No (manual) |

### Server Uninstallation (Complete)

| Item                   | Location                  | Removed                 |
| ---------------------- | ------------------------- | ----------------------- |
| `haloyadm` CLI         | `/usr/local/bin/haloyadm` | ❌ No (separate script) |
| `haloyd` daemon        | Docker container          | ✅ Yes                  |
| HAProxy                | Docker container          | ✅ Yes                  |
| systemd services       | `/etc/systemd/system/`    | ✅ Yes                  |
| Configuration          | `/etc/haloy/`             | ✅ Yes                  |
| Data                   | `/var/lib/haloy/`         | ✅ Yes                  |
| Docker network         | `haloy-public`            | ✅ Yes                  |
| Application containers | User-deployed             | ❌ No (manual)          |
| Application volumes    | User-created              | ❌ No (manual)          |

## Reinstallation

After uninstallation, you can reinstall Haloy:

### Reinstall Client

<Code code={`curl -fsSL https://sh.haloy.dev/install-haloy.sh | bash`} lang="bash" />

### Reinstall Server

<Code code={`# Install admin tool
curl -fsSL https://sh.haloy.dev/install-haloyadm.sh | sudo bash

# Initialize

sudo haloyadm init

# Optionally restore configuration

# (if you preserved /etc/haloy/ and /var/lib/haloy/)`} lang="bash" />

## Troubleshooting

### Cannot Remove systemd Services

<Code code={`# Manually stop and disable services
sudo systemctl stop haloyd
sudo systemctl stop haproxy-haloy
sudo systemctl disable haloyd
sudo systemctl disable haproxy-haloy

# Remove service files

sudo rm -f /etc/systemd/system/haloyd.service
sudo rm -f /etc/systemd/system/haproxy-haloy.service

# Reload systemd

sudo systemctl daemon-reload`} lang="bash" />

### Docker Containers Won't Stop

<Code code={`# Force stop
docker stop $(docker ps -q --filter "label=haloy.app")

# Force remove

docker rm -f $(docker ps -qa --filter "label=haloy.app")`} lang="bash" />

### Permission Denied Errors

<Code code={`# Ensure using sudo for server operations
sudo su

# Then run uninstall script

curl -sL https://sh.haloy.dev/uninstall-server.sh | bash`} lang="bash" />

### Files Still Remain

<Code
  code={`# Manually remove remaining files
sudo rm -rf /etc/haloy/
sudo rm -rf /var/lib/haloy/
sudo rm -rf /usr/local/bin/haloyadm`}
  lang="bash"
/>

## Data Backup Before Removal

If you want to preserve data before removal:

<Code code={`# Backup configuration
sudo tar -czf haloy-config-backup.tar.gz /etc/haloy/

# Backup data

sudo tar -czf haloy-data-backup.tar.gz /var/lib/haloy/

# Backup application volumes

docker volume ls --filter "label=haloy.app" -q | while read vol; do
docker run --rm -v $vol:/data -v $(pwd):/backup ubuntu tar czf /backup/$vol.tar.gz /data
done`} lang="bash" />

## Alternative: Disable Instead of Uninstall

If you're unsure about uninstalling, just disable the services:

<Code code={`# Stop services
sudo haloyadm stop

# Disable auto-start

sudo systemctl disable haloyd
sudo systemctl disable haproxy-haloy

# Services stopped but can be restarted later with:

# sudo systemctl start haloyd

# sudo systemctl start haproxy-haloy`} lang="bash" />

## Next Steps

After uninstallation:

- [Reinstall Haloy](/docs/server-installation) if needed
- Switch to alternative deployment solutions
- Export your configurations for future reference
