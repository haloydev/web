---
import { Image } from 'astro:assets';
import BaseLayout from '@/layouts/base.astro';
import pinkBurst from '../assets/pink-burst.svg';
import blueBurst from '../assets/blue-burst.svg';
import { CurlewLogo } from '@/components/curlew-logo';
import { ButtonLink } from '@/components/ui/button-link';
import { IconArrowRight } from '@tabler/icons-react';
import { Navbar } from '@/components/navbar';
import InstallHaloy from '@/components/install-haloy.astro';
import Code from '@/components/code.astro';
import TerminalVideo from '@/components/terminal-video.astro';
import FeaturesGrid from '@/components/features-grid.astro';
import AiWorkflow from '@/components/ai-workflow.astro';
import ConfigPreview from '@/components/config-preview.astro';
import Footer from '@/components/footer.astro';
import versionData from '@/data/version.json';

const { version } = versionData;
---

<BaseLayout title="Haloy - Cloudless Deploys" description="Deploy Docker-based applications to your own servers with simple YAML configuration, automatic HTTPS, and built-in secret management. No dashboards, no vendor lock-in." class="bg-background-sky">
  <div class="absolute inset-0 mx-auto max-w-7xl overflow-hidden dark:hidden">
    <Image src={pinkBurst} alt="" class="absolute -top-32 left-[10%] w-200" />
    <Image src={pinkBurst} alt="" class="absolute -top-40 left-[40%] w-200" />
    <Image src={pinkBurst} alt="" class="absolute -top-12 left-[27%] w-80" />
    <Image src={pinkBurst} alt="" class="absolute -top-8 left-[30%] w-160" />
    <Image src={pinkBurst} alt="" class="absolute -top-16 left-[15%] w-80" />
    <Image src={blueBurst} alt="" class="absolute -top-24 left-[70%] w-140" />
  </div>

  <div class="relative min-h-screen pb-20">
    <Navbar client:load version={version} />
    <div class="flex justify-center">
      <div class="mt-28 flex max-w-4xl flex-col items-center px-6 sm:mt-20 sm:px-12">
        <h1 class="relative inline-block">
          <CurlewLogo className="absolute -top-12 right-3 w-10 sm:-right-8 sm:w-12" />
          <div class="font-figtree text-center text-5xl font-black text-balance sm:text-6xl">Cloudless Deploys</div>
        </h1>
        <p class="mt-2 max-w-2xl text-center text-xl text-balance sm:leading-10 md:text-2xl">
          No dashboards. No vendor lock-in. LLM-friendly. Deploy your app in minutes with a simple config.
        </p>
        <div class="mt-6 sm:mt-8">
          <ButtonLink href="/docs/quickstart" size="default" className="sm:h-10 sm:has-[>svg]:px-4">
            Read docs
            <IconArrowRight />
          </ButtonLink>
          <ButtonLink href="/docs/what-is-haloy" variant="link" size="default" className="sm:h1-10 sm:px-6">
            What is Haloy?
          </ButtonLink>
        </div>
      </div>
    </div>
    <div class="mt-20 flex justify-center">
      <div class="w-full max-w-3xl px-6">
        <div class="space-y-8">
          <div>
            <div class="mb-3 flex items-center gap-2.5">
              <span class="flex h-6 w-6 items-center justify-center rounded-full bg-emerald-500/10 text-xs font-semibold text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-400">1</span>
              <span class="text-sm font-medium text-muted-foreground">Install the CLI</span>
            </div>
            <InstallHaloy />
          </div>
          <div>
            <div class="mb-3 flex items-center gap-2.5">
              <span class="flex h-6 w-6 items-center justify-center rounded-full bg-emerald-500/10 text-xs font-semibold text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-400">2</span>
              <span class="text-sm font-medium text-muted-foreground">Setup your server via SSH</span>
            </div>
            <Code code="curl -fsSL https://sh.haloy.dev/install-haloyd.sh | API_DOMAIN=haloy.yourserver.com sh" lang="bash" />
          </div>
        </div>
      </div>
    </div>
    <div class="mt-20 flex justify-center">
      <div class="w-full max-w-3xl px-6">
        <TerminalVideo src="/haloy-deploy-demo.webm" title="haloy deploy" />
      </div>
    </div>

    <FeaturesGrid />

    <AiWorkflow />

    <ConfigPreview />
  </div>

  <Footer />
</BaseLayout>
